<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" th:href="@{/css/styles.css}">
    <title>Instructor</title>
</head>

<!-- Ethan Watson -->

<body>
    <div th:insert="~{fragments/frags :: header}" class="header">
    </div>
    <h2>Instructor Page</h2>

    <table border="solid">
        <thead>
            <th>Employee ID</th>
            <th>Username</th>
            <th>Password</th>
            <th>Permissions</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Email</th>
            <th>Phone Number</th>
            <th>Address</th>
            <th>City</th>
            <th>Province</th>
            <th>Postal Code</th>
            <th>Country</th>
        </thead>
        <tr>
            <td th:text="${instructor_id}"></td>
            <td th:text="${instructor.username}"></td>
            <td th:text="${instructor.password}"></td>
            <td th:text="${instructor.permissions}"></td>
            <td th:text="${instructor.firstName}"></td>
            <td th:text="${instructor.lastName}"></td>
            <td th:text="${instructor.email}"></td>
            <td th:text="${instructor.phoneNumber}"></td>
            <td th:text="${instructor.address}"></td>
            <td th:text="${instructor.city}"></td>
            <td th:text="${instructor.province}"></td>
            <td th:text="${instructor.postalCode}"></td>
            <td th:text="${instructor.country}"></td>
        </tr>
    </table>

    <a href="/courses">View courses</a>
    <br>
    <form action="/assignments" method="GET">
        <select name="course">
            <option value="" disabled selected>Select Course</option>
            <option th:each="course:${courses}" th:text="${course.name}" required="true"></option>
        </select>
        <button>View Assignments</button>
    </form>
    
    </form>
    <br><br>
    <h3>Create New Assignment</h3>
    <form id="createForm" action="/createAssignment" method="post">
        <label for="course">Course</label>
        <select name="course">
            <option value="" disabled selected>Select Course</option>
            <option th:each="course:${courses}" th:text="${course.name}" th:value="selected" required="true"></option>
        </select>
        <br>
        <label for="assignmentName">Assignment Name</label>
        <input type="text" th:value="${name}">
        <br>
        <label for="assignmentDescription">Assignment Description</label>
        <input type="text" th:value="${assignmentDescription}">
        <br>
        <label for="assignmentDueDate">Due Date</label>
        <input type="text" th:value="${assignmentDueDate}">
        <br>
        <input type="text" th:value="${instructor_id}" style="display: none;">


        <input type="submit" value="Create Assignment">
    </form>
    <br>
    <br>
    <div id="successMessage" style="display: none; color: green;">
        File successfully uploaded!
    </div>
    <br>
    <script>
        // Add this script to handle the success message
        document.getElementById('createForm').addEventListener('submit', function () {
            document.getElementById('successMessage').style.display = 'none'; // Hide the success message on each submit

            // You can add further logic here if needed

        });

            // Add this script to handle the success message display after a successful upload
            // This assumes you have a query parameter 'uploadSuccess' in the redirect URL
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.has('uploadSuccess')) {
                document.getElementById('successMessage').style.display = 'block';
                setTimeout(function () {
                    document.getElementById('successMessage').style.display = 'none';
                }, 5000);
            }
        </script>

    <div th:insert="~{fragments/frags :: logout}">

</body>

</html>